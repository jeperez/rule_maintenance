#set($pagetitle='Projects List')
<p class="heading">Projects List ($projects.size())</p>
<p>
	<img id="helpimg" height="24" width="24" src="img/help_black.png" title="show help" onclick="switchHelp()">
	<a href="process?action=bsh&ro=1&scriptname=selecteditproject&id=0&mode=add"><img class="add_external" height="24px" width="24px" src="img/plus_red.png" title="add project"></a>
</p>
<div id="help">
	<p>List of available Projects. Projects bundle rule groups, rules and actions for a certain topic together. Users that are in the group that the project belongs to have write access to the project. Projects marked as private are invisible to users outside the group.</p>
	<p><img height="24" width="24" src="img/edit.png">&nbsp;edit project&nbsp;<img height="24" width="24" src="img/plus_red.png">&nbsp;add new project&nbsp;<img height="24" width="24" src="img/remove.png">&nbsp;delete project&nbsp;<img height="24" width="24" src="img/copy.png">&nbsp;copy project&nbsp;<img height="24" width="24" src="img/document.png">&nbsp;project logic&nbsp;<img height="24" width="24" src="img/reference_field.png">&nbsp;project reference fields</p>
</div>
<div id="filter">
	<p>Filter: <input id="search" searchtype="project" type="text"></p>
</div>
#foreach($project in $projects)
	<div class="unit" tag="$!{project.name.toLowerCase()}">
		<a target="_external" href="process?action=bsh&ro=1&scriptname=listrulegrouplogic&projectid=${project.id}"><img class="rulegrouplogic" height="24px" width="24px" src="img/document.png" title="project logic"></a>
		#if($user.canUpdateProject($project)==true)
			#if($user.canDeleteProject($project)==true)<a href="process?action=bsh&ro=1&scriptname=selectdeleteproject&projectid=${project.id}&mode=change"><img class="delete" height="24px" width="24px" src="img/remove.png" title="delete project"></a>#end
			<a href="process?action=bsh&ro=1&scriptname=selecteditproject&id=${project.id}&mode=change"><img class="edit" height="24px" width="24px" src="img/edit.png" title="edit project"></a>
			<a href="process?action=bsh&ro=1&scriptname=listreferencefields&id=${project.id}&mode=change"><img class="attach" height="24px" width="24px" src="img/reference_field.png" title="project reference fields"></a>
			<a href="process?action=bsh&ro=1&scriptname=selectcopyproject&projectid=${project.id}"><img class="copyproject" height="24px" width="24px" src="img/copy.png" title="copy project"></a>
		#end
		<div class="grouptop">
			<p class="small">project #if(${project.privateProject}==1)(private)#end</p>
			<p class="big"><a href="process?action=bsh&ro=1&scriptname=listrulegroups&projectid=${project.id}">$!{project.name}</a></p>
			<p class="normal">$!{project.description}</p>
			<p class="normal">group: $!{project.group.name}, owner: $!{project.ownerUser.name}</p>
		</div>
		<div>
			<p class="small">updated: $project.getLastUpdate(16)</p>
		</div>
	</div>
#end
